<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::section})}">

<head>
	<title>Catálogo de Productos</title>
</head>

<body>
	<section>
		<section class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h1>Catálogo</h1>
					</div>
					<div class="col-sm-6">
						<div class="input-group">
							<select id="category-filter" class="form-control" style="max-width: 200px;">
								<option value="">Todas las categorías</option>
								<option th:each="cat : ${categoriasUnicas}" th:value="${cat}" th:text="${cat}"></option>
							</select>
							<input type="text" id="search-box" class="form-control"
								placeholder="Buscar producto por nombre...">
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="content">
			<div class="container-fluid">
				<div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
					<span th:text="${successMessage}"></span>
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
				</div>
				<div th:if="${errorMessage}" class="alert alert-danger" role="alert" th:text="${errorMessage}"></div>

				<div class="card card-solid">
					<div class="card-body pb-0">
						<div id="product-list-container" class="row">
							<!-- Los productos se cargarán aquí dinámicamente con JavaScript -->
							<div class="col-12 text-center p-5">
								<i class="fas fa-spinner fa-spin fa-3x"></i>
								<p>Cargando productos...</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- El script de filtro dinámico NO necesita cambios. Se deja la misma referencia. -->
		<script th:src="@{/Admin/dist/js/catalogo-filter.js}"></script>

		<!-- Este script es necesario para que el botón de cerrar la alerta de éxito funcione -->
		<script>
			// Cierra las alertas de Bootstrap después de 3 segundos
			window.setTimeout(function () {
				$(".alert-success").fadeTo(500, 0).slideUp(500, function () {
					$(this).remove();
				});
			}, 3000);
		</script>
</body>

</html>